<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Lonely - Free bootstrap 3 one page template</title>

  <!-- CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="css/nivo-lightbox.css" rel="stylesheet" />
  <link href="css/nivo-lightbox-theme/default/default.css" rel="stylesheet" type="text/css" />
  <link href="css/owl.carousel.css" rel="stylesheet" media="screen" />
  <link href="css/owl.theme.css" rel="stylesheet" media="screen" />
  <link href="css/animate.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet">
  <link href="color/default.css" rel="stylesheet">
  <!-- =======================================================
    Theme Name: Lonely
    Theme URL: https://bootstrapmade.com/free-html-bootstrap-template-lonely/
    Author: BootstrapMade
    Author URL: https://bootstrapmade.com
  ======================================================= -->


</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-custom">
  <!-- Preloader -->
  <div id="preloader">
    <div id="load"></div>
  </div>

  <!-- Section: intro -->
  <section id="intro" class="intro">

    <div class="slogan">
      <a href="index.html"><img src="img/‏‏earthhood_logo_small.png" alt="" /></a>
    </div>
    <div class="page-scroll">
      <a href="#about">
				<i class="fa fa-angle-down fa-5x animated"></i>
			</a>
    </div>
  </section>
  <!-- /Section: intro -->

  <!-- Navigation -->
  <div id="navigation">
    <nav class="navbar navbar-custom" role="navigation">
      <div class="container">
        <div class="row">
          <div class="col-md-12">

            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu">
                                                <i class="fa fa-bars"></i>
                                                </button>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="menu">
              <ul class="nav navbar-nav">
                <li class="active"><a href="#intro">Home</a></li>
                <li><a href="#about">Solar System</a></li>
                <li><a href="#gallery">Wind </a></li>

              </ul>
            </div>
            <!-- /.Navbar-collapse -->

          </div>
        </div>
      </div>
      <!-- /.container -->
    </nav>
  </div>
  <!-- /Navigation -->

  <!-- Section: about -->
  <section id="about" class="home-section">
    <div class="container">
      <div class="row" >
        <div id="chartdiv2"class="col-md-4 centerdgraph" >
            <caption> Standered Voltage</caption>




        </div>
        <div id="chartdiv4" class="col-md-4 centerdgraph">
            <caption> Voltage</caption>




        </div>
        <div id="chartdiv1" class="col-md-4 centerdgraph">
            <caption>  current</caption>




          </div>
      </div>
    </div>



  </section>
  <!-- /Section: about -->

<div class="msg">
</div>

  <!-- Section: gallery -->
  <section id="gallery" class="home-section text-center bg-gray">

    <div class="container">
      <div class="row">

          <div class="wow bounceInDown" data-wow-delay="0.4s">

              <div class="section-heading">
                  <h2>wind Measurement</h2>
                </div>

                  <div class="row" >
                    <div id="chartdiv3" class="col-md-6 centerdgraph" >
                      <caption> Standered Wind Speed</caption>




                    </div>
                    <div id="chartdiv5"  class="col-md-6 centerdgraph">
                        <caption> Current Wind Speed</caption>




                    </div>
                  </div>
              </div>


          </div>

      </div>
    </div>


  </section>
  <!-- /Section: services -->




  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-lg-12">
          <p>&copy; Earthood team. All Rights Reserved</p>
          <div class="credits">

          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Core JavaScript Files -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/jquery.sticky.js"></script>
  <script src="js/jquery.scrollTo.js"></script>
  <script src="js/stellar.js"></script>
  <script src="js/wow.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/nivo-lightbox.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script src="js/custom.js"></script>
  <script src="contactform/contactform.js"></script>

</body>
<!-- Resources -->
<script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script src="https://www.amcharts.com/lib/3/gauge.js"></script>
<script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
<link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
<script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
var gaugeChart4 = AmCharts.makeChart( "chartdiv4", {
  "type": "gauge",
  "theme": "light",
  "axes": [ {
    "axisThickness": 2,
    "axisAlpha": 0.2,
    "tickAlpha": 0.2,
    "valueInterval": 0.3,
    "bands": [ {
      "color": "#84b761",
      "endValue": 18.6,
      "startValue": 18,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 18,
      "startValue": 15,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 20,
     "innerRadius": "90%",
      "startValue": 18.6
    } ],
   "bottomText": "0 voltage",
    "bottomTextYOffset": -20,
    "endValue": 20,
    "startValue": 15
  } ],
  "arrows": [ {} ],
  "export": {
    "enabled": true
  }
} );

var gaugeChart = AmCharts.makeChart( "chartdiv1", {
  "type": "gauge",
  "theme": "light",
  "axes": [ {
    "axisThickness": 2,
    "axisAlpha": 0.2,
    "tickAlpha": 0.2,
    "valueInterval": 0.3,
    "bands": [ {
      "color": "#84b761",
      "endValue": 18.6,
      "startValue": 18,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 18,
      "startValue": 15,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 20,
     "innerRadius": "90%",
      "startValue": 18.6
    } ],
   "bottomText": "0 voltage",
    "bottomTextYOffset": -20,
    "endValue": 20,
    "startValue": 15
  } ],
  "arrows": [ {} ],
  "export": {
    "enabled": true
  }
} );
var gaugeChart2 = AmCharts.makeChart( "chartdiv2", {
  "type": "gauge",
  "theme": "light",
  "axes": [ {
    "axisThickness": 2,
    "axisAlpha": 0.2,
    "tickAlpha": 0.2,
    "valueInterval": 0.3,
    "bands": [ {
      "color": "#84b761",
      "endValue": 18.6,
      "startValue": 18,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 18,
      "startValue": 15,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 20,
     "innerRadius": "90%",
      "startValue": 18.6
    } ],
   "bottomText": "0 voltage",
    "bottomTextYOffset": -20,
    "endValue": 20,
    "startValue": 15
  } ],
  "arrows": [ {} ],
  "export": {
    "enabled": true
  }
} );
var gaugeChart3 = AmCharts.makeChart( "chartdiv3", {
  "type": "gauge",
  "theme": "light",
  "axes": [ {
    "axisThickness": 2,
    "axisAlpha": 0.2,
    "tickAlpha": 0.2,
    "valueInterval": 0.3,
    "bands": [ {
      "color": "#84b761",
      "endValue": 18.6,
      "startValue": 18,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 18,
      "startValue": 15,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 20,
     "innerRadius": "90%",
      "startValue": 18.6
    } ],
   "bottomText": "0 KW",
    "bottomTextYOffset": -20,
    "endValue": 20,
    "startValue": 15
  } ],
  "arrows": [ {} ],
  "export": {
    "enabled": true
  }
} );

var gaugeChart4 = AmCharts.makeChart( "chartdiv4", {
  "type": "gauge",
  "theme": "light",
  "axes": [ {
    "axisThickness": 2,
    "axisAlpha": 0.2,
    "tickAlpha": 0.2,
    "valueInterval": 100,
    "bands": [ {
      "color": "#84b761",
      "endValue": 700,
      "startValue": 600,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 600,
      "startValue": 100,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 1000,
     "innerRadius": "90%",
      "startValue": 700
    } ],
   "bottomText": "0 KW",
    "bottomTextYOffset": -20,
    "endValue": 1000,
    "startValue": 100
  } ],
  "arrows": [ {} ],
  "export": {
    "enabled": true
  }
} );

var gaugeChart5 = AmCharts.makeChart( "chartdiv5", {
  "type": "gauge",
  "theme": "light",
  "axes": [ {
    "axisThickness": 2,
    "axisAlpha": 0.2,
    "tickAlpha": 0.2,
    "valueInterval": 0.3,
    "bands": [ {
      "color": "#84b761",
      "endValue": 18.6,
      "startValue": 18,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 18,
      "startValue": 15,
      "innerRadius": "90%"
    }, {
      "color": "#cc4748",
      "endValue": 20,
     "innerRadius": "90%",
      "startValue": 18.6
    } ],
   "bottomText": "0 KW",
    "bottomTextYOffset": -20,
    "endValue": 20,
    "startValue": 15
  } ],
  "arrows": [ {} ],
  "export": {
    "enabled": true
  }
} );

// let resultsContainer = document.getElementById("results");
let voltStandard = 18;
let currentStandard = 0.4;
let healthy = true;
let id = 1;
function checker(voltage, current){
  //let iShortCircute = data['ShortCircute'];
  // let voltage = data['voltage'];
  // let current = data['current'];
//constant values
  let iShortCircute = 0.63;
  // let voltage = 18;
  // let current = 0.4;
  if (current == currentStandard){
    current = iShortCircute * 0.9;
  } else{
      current = current * 0.9;
  }
    voltage = (voltage - voltStandard) + 0.0014;
    if (current < currentStandard)
      healthy = false;
    else{
      healthy = true;
      // resultsContainer.innerHTML = "there's no error";
    }
    if (!healthy)
      if (voltage != voltStandard)
        console.log("ERROR");
        // resultsContainer.innerHTML = "thers's an error in branch"+id;
        //return 'error in '+id;
   // fetch('https://hooks.zapier.com/hooks/catch/3509879/ln5xqz/', {
   //    method: 'POST',
   //    body: JSON.stringify({i: 18, v: 0.0004})
   //  });
}
// setInterval( randomValue(), 2000 );
</script>
<script>
$.ajax({
  dataType: "json",
  url: "",
  data: String,
  success: true
});
let standard=18;
let standardWind=600;

$.getJSON( "testJSON.json", function( data ) {
 let i =0;

  setInterval( function(){
    //v standared
    randomValue(standard, gaugeChart2, "voltage");
    console.log("2");

    // console.log("3");

    randomValue(standard, gaugeChart3, "KW");
	  randomValue(standardWind, gaugeChart4, "MA");
    console.log("4");


    if(i >= data.length){
      // console.log(data.length);
    }else{
      console.log(data[i]);
      checker(data[i].i,data[i].v);
	    
      randomValue(data[i].v, gaugeChart, "voltage");
//       randomValue(data[i].v, gaugeChart3, "KW");
      randomValue(data[i].v, gaugeChart5, "KW");
      // console.log("5");
	    if(data[i].v > 19 || data[i].v < 18){
		    
  
		    document.getElementsByClassName("msg").innerHTML = " <div class='alert'> Danger : problem in the Station number : 1</div>";
// 		    alert("Danger : problem in the Station number 1 !!!");
	    }
      i++;
	    if(standardWind > 700){
		    standardWind=700;
	    }standardWind = standardWind +15;
      if(standard > 18.5){
        console.log("standated is 18.5");
      standard = 18;
    }else{
      standard = standard+0.1;
    }
    }
  }, 500 );
});
// set random value
function randomValue(value, Chart, unit) {
  // var value = Math.round( Math.random() * 200 );
  if ( Chart ) {
    if ( Chart.arrows ) {
      if ( Chart.arrows[ 0 ] ) {
        if ( Chart.arrows[ 0 ].setValue ) {
          Chart.arrows[ 0 ].setValue( value );
          Chart.axes[ 0 ].setBottomText( value + " " + unit);
        }
      }
    }
  }
}
</script>

</html>
